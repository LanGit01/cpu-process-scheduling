<html>
	<head>
		<script type = "text/javascript" src = "../src/js/scheduling/Process.js"></script>
		<script type = "text/javascript" src = "../src/js/utils/LinkedList.js"></script>
		<script>
			var LinkedList = CPUscheduling.LinkedList;

			function Data(number, name){
				this.number = number;
				this.name = name;
			}

			function compareData(data1, data2){
				var num1 = data1.number,
					num2 = data2.number;

				if(num1 > num2){
					return 1;
				}else
				if(num1 < num2){
					return -1;
				}else{
					return 0;
				}
			}

			function getKey(data){
				return data.number;
			}

			function printList(list){
				var current;

				for(current = list._head; current !== null; current = current.next){
					console.log(current.data);
				}
			}

			var element;

			var list1 = new LinkedList();
			var list2 = new LinkedList(compareData);
			var list3 = new LinkedList(compareData, getKey);

			var data1 = new Data(100, "one hundred"),
				data2 = new Data(200, "two hundred"),
				data3 = new Data(100, "same as data 1");

			// Testing

			console.log("\n\nCompare function test");
			console.log("Compare 100 and 200: " + compareData(data1, data2));
			console.log("Compare 200 and 100: " + compareData(data2, data1));
			console.log("Compare 100 and 100: " + compareData(data1, data3));



			/* 		Without compare function		*/
			list1.insert(new Data(1, "A"));
			list1.insert(new Data(2, "B"));
			list1.insert(new Data(7, "C"));
			list1.insert(new Data(3, "D"));
			list1.insert(new Data(6, "E"));
			list1.insert(new Data(4, "F"));

			console.log("\n\nList w/o compareFunc\nExpected: [1, 2, 7, 3, 6, 4, 0]" + 
						"\nLength: " + list1.getLength() + "\n");
			printList(list1);



			/* 		With compare function		*/
			list2.insert(new Data(1, "A"));
			list2.insert(new Data(2, "B"));
			list2.insert(new Data(7, "C"));
			list2.insert(new Data(3, "D"));
			list2.insert(new Data(6, "E"));
			list2.insert(new Data(4, "F"));
			list2.insert(new Data(0, "G"));

			console.log("\n\nList w/ compareFunc\nExpected: [1, 2, 7, 3, 6, 4]" +
						"\nLength: " + list2.getLength() + "\n");
			printList(list2);

			

			/*		Testing remove method		*/
			list3.insert(new Data(1, "A"));
			list3.insert(new Data(2, "B"));
			list3.insert(new Data(3, "C"));
			list3.insert(new Data(4, "D"));
			list3.insert(new Data(5, "E"));

			console.log("\n\nBefore deletion [1, 2, 3, 4, 5]"+
						"\nLength: " + list3.getLength() + "\n");
			printList(list3);

			list3.remove(2);
			list3.remove(4);

			console.log("\n\n2 and 4 deleted"+
						"\nLength: " + list3.getLength() + "\n");
			printList(list3);

			list3.insert(new Data(4, "D"));
			list3.insert(new Data(6, "F"));

			console.log("\n\n4 and 6 inserted"+
						"\nLength: " + list3.getLength() + "\n");
			printList(list3);

			
			element = list3.removeHead();
			console.log("\n\nFront removed"+
						"\nLength: " + list3.getLength() + "\n");
			printList(list3);


			list3.insert(element);
			console.log("\n\nReadd previously removed"+
						"\nLength: " + list3.getLength() + "\n");
			printList(list3);

			/*		Testing remove on references		*/
			var dataRef1 = new Data(10, "J"),
				dataRef2 = new Data(5, "-");

			list2.insert(dataRef1);
			list2.insert(dataRef2);

			console.log("\n\n10 and 5 inserted [1, 2, 7, 3, 6, 4, 0]"+
						"\nLength: " + list2.getLength() + "\n");
			printList(list2);

			list2.remove(dataRef1);
			list2.remove(dataRef2);

			console.log("\n\n10 and 5 removed"+
						"\nLength: " + list2.getLength() + "\n");
			printList(list2);


			/*		Testing element fetching	*/
			console.log("\n\n[0, 1, 2, 3, 4, 6, 7]" + 
						"\nLength: " + list2.getLength() +
						"\nFetch at index 2: " + list2.elementAt(2).number +
						"\nFetch at index 6: " + list2.elementAt(6).number +
						"\nFetch at index 5: " + list2.elementAt(5).number);

			console.log("Fetching outside of bounds" +
						"\nFetch at index -1: " + list2.elementAt(-1) +
						"\nFetch at index 7: " + list2.elementAt(7));


			/*		Testing iterator		*/
			console.log("\n\nIterator [0, 1, 2, 3, 4, 6, 7]");
			
			var iterator = list2.getIterator();
			while(iterator.hasNext()){
				console.log(iterator.getNext());
			}

			console.log("\n\nIterator [1, 3, 4, 5, 6]");
			iterator = list3.getIterator();
			while(iterator.hasNext()){
				console.log(iterator.getNext());
			}


		</script>
	</head>
	<body>
		Open the console
	</body>
</html>