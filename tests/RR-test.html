<!DOCTYPE html>
<html>
	<head>
		<style>
			table {
				border-collapse: collapse;
				border: 2px solid black;
				text-align: center;
				margin: 40px auto;
			}

			thead {
				border: 2px solid black;
			}

			th, td {
				padding: 2px 16px;
			}

			th {
				border: 1px solid black;
			}

			td {
				border: 1px solid black;
			}
		</style>
		<title>Round Robin Scheduling Test</title>
		<script type = "text/javascript" src = "../src/js/utils/sugar.js"></script>
		<script type = "text/javascript" src = "../src/js/main.js"></script>
		<script type = "text/javascript" src = "../src/js/utils/LinkedList.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/Process.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/schedulers/SimpleScheduler.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/schedulers/RRScheduler.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/ProcessManager.js"></script>
		<script>
			var RRScheduler = ProcessScheduling.Core.Schedulers.RRScheduler,
				Process = ProcessScheduling.Core.Process,
				ProcessManager = ProcessScheduling.Core.ProcessManager;

			var pm, processList;

			function generateProcessDataTable(processList){
				var row, process, tbody,
					tr;

				tbody = document.getElementById("process-data-table").tBodies[0];

				for(row = 0; row < processList.length; row++){
					process = processList[row];

					tr = tbody.insertRow();
					tr.insertCell().appendChild(document.createTextNode(process.id));
					tr.insertCell().appendChild(document.createTextNode(process.burstTime));
					tr.insertCell().appendChild(document.createTextNode(process.arrivalTime));
					tr.insertCell().appendChild(document.createTextNode(process.startTime));
					tr.insertCell().appendChild(document.createTextNode(process.endTime));
					tr.insertCell().appendChild(document.createTextNode(process.getWaitTime()));
					tr.insertCell().appendChild(document.createTextNode(process.getResponseTime()));
					tr.insertCell().appendChild(document.createTextNode(process.getTurnaroundTime()));
				}
			}

			pm = new ProcessManager();
			pm.addProcess(1, 16, 0);
			pm.addProcess(2, 10, 0);
			pm.addProcess(3, 4, 6);
			pm.addProcess(4, 6, 7);
			pm.addProcess(5, 10, 8);

			window.onload = function(){
				generateProcessDataTable(pm.run(new RRScheduler(5)));
			}
			

		</script>
	</head>
	<body>
		<div>
			<table id = "debug-table">
				<thead>
					<tr>
						<th>Time</th>
						<th>ID</th>
						<th>Remaining</th>
						<th>Waiting</th>
					</tr>
				</thead>
				<tbody>

				</tbody>
			</table>
			<table id = "process-data-table">
				<thead>
					<tr>
						<th>Process ID</th>
						<th>Burst Time</th>
						<th>Arrival Time</th>
						<th>Start Time</th>
						<th>End Time</th>
						<th>Wait Time</th>
						<th>Response Time</th>
						<th>Turnaround Time</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
	</body>
</html>