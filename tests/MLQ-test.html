<!DOCTYPE html>
<html>
	<head>
		<title>Multilevel Queue Scheduler Test</title>
		<script type = "text/javascript" src = "../src/js/utils/misc.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/Process.js"></script>
		<script type = "text/javascript" src = "../src/js/utils/LinkedList.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/Record.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/ProcessManager.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/schedulers/FCFSScheduler.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/schedulers/MLQScheduler.js"></script>
		
		<script type = "text/javascript" src = "../src/js/ui/DataTransformer.js"></script>
		<script type = "text/javascript" src = "../src/js/ui/ChartGridArea.js"></script>
		<script type = "text/javascript" src = "../src/js/ui/LabelStrip.js"></script>
		<script type = "text/javascript" src = "../src/js/ui/GanttChartGUI.js"></script>
		<script>
			var Process = CPUscheduling.Process,
				ProcessManager = CPUscheduling.ProcessManager,
				DataTransformer = CPUscheduling.DataTransformer,
				FCFSScheduler = CPUscheduling.FCFSScheduler,
				MLQScheduler = CPUscheduling.MLQScheduler,
				GanttChartGUI = CPUscheduling.GanttChartGUI;

			var pm = new ProcessManager(),
				record, data, s;

			pm.setScheduler(new MLQScheduler(false, [
				new FCFSScheduler(),
				new FCFSScheduler()
			]));

			pm.addProcess(0, 4, 0, null, 0);
			pm.addProcess(1, 4, 0, null, 1);
			pm.addProcess(2, 4, 1, null, 1);

			record = pm.run();
			/*s = new MLQScheduler(false, [
				new FCFSScheduler(),
				new FCFSScheduler()
			]);

			var step = (function(){
				var time = 0, running;

				return function(s, num){
					for(var i = 0; i < num; i++){
						s.step();

						if(s.hasRunningProcess()){
							running = s.getRunningProcess();
							console.log("(" + (time++) + ") " + running.process.id + " - " + running.process.remainingTime + " [" + running.level + "]");
						}else{
							console.log("(" + (time++) + ") none");
						}

						console.log(s.hasWaitingProcesses());
					}
				}
			})();

			s.newArrivingProcess(new Process(0, 8, 0, null), 0);
			step(s, 6);
			s.newArrivingProcess(new Process(1, 2, 0, null), 1);
			step(s, 1);
			s.newArrivingProcess(new Process(2, 2, 0, null), 0);
			step(s, 6);*/

			
			
			/*
			data = DataTransformer.transform(record);

			window.onload = function(){
				var div = document.getElementById("gantt-chart-canvas");
				ganttChart = new GanttChartGUI(data);
				ganttChart.init(div, null);
				ganttChart.draw();
			}*/
		</script>
	</head>
	<body>
		<pre>
			<div id = "gantt-chart-text"></div>
			<div id = "table-text"></div>
			<div id = "gantt-chart-canvas"></div>
		</pre>
	</body>
</html>