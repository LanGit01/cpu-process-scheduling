<html>
	<head>
		<style>
			canvas{
				border: 1px dashed red;
			}
		</style>
		<script type = "text/javascript" src = "../src/js/utils/misc.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/Process.js"></script>
		<script type = "text/javascript" src = "../src/js/utils/LinkedList.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/SchedulerLog.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/ProcessManager.js"></script>
		<script type = "text/javascript" src = "../src/js/scheduling/schedulers/FCFSScheduler.js"></script>
		<script type = "text/javascript" src = "../src/js/ui/TextDisplay.js"></script>
		<script type = "text/javascript" src = "../src/js/ui/GanttChartUI.js"></script>
		<script>
			var Process = CPUscheduling.Process,
				LinkedList = CPUscheduling.LinkedList,
				ProcessManager = CPUscheduling.ProcessManager,
				FCFSScheduler = CPUscheduling.FCFSScheduler,
				TextDisplay = CPUscheduling.TextDisplay,
				GanttChartUI = CPUscheduling.GanttChartUI;


			var pm = new ProcessManager(),
				itr, p,
				log, logs, logsItr, time, text,
				ganttChart;


			pm.setScheduler(new FCFSScheduler());
			pm.addProcess(1, 5, 0);
			pm.addProcess(2, 3, 4);
			pm.addProcess(3, 2, 2);
			pm.addProcess(4, 5, 15);


			logs = pm.run();
			pids = [];

			processList = selectionSort(pm.getProcesses(), function(p1, p2){
				var id1 = p1.id,
					id2 = p2.id;

				if(id1 > id2){
					return 1;
				}else
				if(id1 < id2){
					return -1;
				}else{
					return 0;
				}
			});

			for(i = 0; i < processList.length; i++){
				pids[i] = processList[i].id;
			}


			ganttChart = new GanttChartUI(pids, logs);


				
			window.onload = function(){
				var div;
				div = document.getElementById("gantt-chart-text");
				div.appendChild(document.createTextNode(TextDisplay.generateTextGanttChart(pids, logs)));
				
				div = document.getElementById("table-text");
				div.appendChild(document.createTextNode(TextDisplay.generateTextProcessTable(processList)));

				div = document.getElementById("gantt-chart-canvas");
				div.appendChild(ganttChart.initDisplay());
				ganttChart.setPosition(495, 0);
				ganttChart.draw();
				//ganttChart.drawChart();
				//ganttChart.drawLabels();
			}



		</script>
	</head>
	<body>
		<pre>
			<div id = "gantt-chart-text"></div>
			<div id = "table-text"></div>
			<div id = "gantt-chart-canvas"></div>
		</pre>
	</body>
</html>